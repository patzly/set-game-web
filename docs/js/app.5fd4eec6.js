(function(){"use strict";var e={6053:function(e,t,o){var n=o(5130),s=o(6768);const a={id:"app"},i={class:"main"};function r(e,t,o,n,r,l){const c=(0,s.g2)("menu-component"),d=(0,s.g2)("LoginComponent"),u=(0,s.g2)("RegisterComponent"),h=(0,s.g2)("home-component"),m=(0,s.g2)("settings-component"),g=(0,s.g2)("cards-component"),p=(0,s.g2)("bottom-component"),f=(0,s.g2)("offline-component");return(0,s.uX)(),(0,s.CE)("div",a,[r.home?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(c,{key:0,offlineMode:r.home,"can-undo":r.canUndo,"can-redo":r.canRedo,gameState:r.gameState,gameId:r.gameId},null,8,["offlineMode","can-undo","can-redo","gameState","gameId"])),(0,s.Lk)("div",i,[!r.user&&r.showLogin?((0,s.uX)(),(0,s.Wv)(d,{key:0,onSwitchToRegister:l.showRegisterComponent,onAuthenticated:l.handleAuthenticated},null,8,["onSwitchToRegister","onAuthenticated"])):(0,s.Q3)("",!0),r.user||r.showLogin?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(u,{key:1,onSwitchToLogin:l.showLoginComponent,onAuthenticated:l.handleAuthenticated},null,8,["onSwitchToLogin","onAuthenticated"])),r.home&&r.user?((0,s.uX)(),(0,s.Wv)(h,{key:2,offlineMode:r.home,onUpdateWebSocket:l.setWebSocket,onLocalCreateGame:l.handleLocalCreateGame,onLocalJoinGame:l.handleLocalJoinGame},null,8,["offlineMode","onUpdateWebSocket","onLocalCreateGame","onLocalJoinGame"])):(0,s.Q3)("",!0),r.gameState||r.home?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(m,{key:3,offlineMode:r.home,playerCount:r.playerCount,easyMode:r.easyMode,"onUpdate:playerCount":t[0]||(t[0]=e=>r.playerCount=e)},null,8,["offlineMode","playerCount","easyMode"])),r.gameState?((0,s.uX)(),(0,s.Wv)(g,{key:4,offlineMode:r.home,cards:r.cards,selectedPlayer:r.selectedPlayer},null,8,["offlineMode","cards","selectedPlayer"])):(0,s.Q3)("",!0)]),(0,s.bF)(p,{gameState:r.gameState,playerCount:r.playerCount,selectedPlayer:r.selectedPlayer,players:r.players,message:r.message,home:r.home,onEndSession:l.handleEndSession,onSelectPlayer:l.handlePlayerSelection},null,8,["gameState","playerCount","selectedPlayer","players","message","home","onEndSession","onSelectPlayer"]),r.isOnline||r.home?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(f,{key:1,disableOfflineMode:l.disableOfflineMode},null,8,["disableOfflineMode"]))])}o(8992),o(2577),o(1454);var l=o(3869),c=o(6400);const d={apiKey:"AIzaSyCYVtH7p7gATE2Ilhdwctn8-9InPhJ61y0",authDomain:"set-game-d6102.firebaseapp.com",projectId:"set-game-d6102",storageBucket:"set-game-d6102.firebasestorage.app",messagingSenderId:"915528246131",appId:"1:915528246131:web:baa939b5d327be7235db06",measurementId:"G-SV9HCRV9J8"},u=(0,c.Wp)(d),h=(0,l.xI)(u);const m={class:"login-container"},g={class:"input-group"},p={class:"input-group"};function f(e,t,o,a,i,r){return(0,s.uX)(),(0,s.CE)("div",m,[t[9]||(t[9]=(0,s.Lk)("h2",{class:"login-header"},"Login",-1)),(0,s.Lk)("form",{onSubmit:t[2]||(t[2]=(0,n.D$)(((...e)=>r.loginWithEmail&&r.loginWithEmail(...e)),["prevent"])),class:"login-form"},[(0,s.Lk)("div",g,[t[5]||(t[5]=(0,s.Lk)("label",{for:"email"},"Email:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>i.email=e),id:"email",required:"",class:"custom-input"},null,512),[[n.Jo,i.email]])]),(0,s.Lk)("div",p,[t[6]||(t[6]=(0,s.Lk)("label",{for:"password"},"Password:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>i.password=e),id:"password",required:"",class:"custom-input"},null,512),[[n.Jo,i.password]])]),t[7]||(t[7]=(0,s.Lk)("button",{type:"submit",class:"custom-button"},"Login",-1))],32),(0,s.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>r.loginWithGoogle&&r.loginWithGoogle(...e)),class:"custom-button google-button"}," Login with Google "),(0,s.Lk)("p",null,[t[8]||(t[8]=(0,s.eW)(" Noch keinen Account? ")),(0,s.Lk)("button",{onClick:t[4]||(t[4]=t=>e.$emit("switch-to-register")),class:"link-button"}," Hier registrieren ")])])}var k={name:"LoginComponent",data(){return{email:"",password:""}},methods:{async loginWithEmail(){try{const e=await(0,l.x9)(h,this.email,this.password),t=e.user;this.$emit("onAuthenticated",t),console.log("Erfolgreich eingeloggt:",t)}catch(e){console.error("Fehler beim Login mit E-Mail:",e.message)}},async loginWithGoogle(){try{const e=new l.HF,t=await(0,l.df)(h,e),o=t.user;this.$emit("onAuthenticated",o),console.log("Erfolgreich eingeloggt mit Google:",o)}catch(e){console.error("Fehler beim Google-Login:",e.message)}}}},b=o(1241);const y=(0,b.A)(k,[["render",f]]);var v=y;const C={class:"register-container"},S={class:"input-group"},w={class:"input-group"},L={class:"input-group"};function E(e,t,o,a,i,r){return(0,s.uX)(),(0,s.CE)("div",C,[t[11]||(t[11]=(0,s.Lk)("h2",{class:"register-header"},"Registrieren",-1)),(0,s.Lk)("form",{onSubmit:t[3]||(t[3]=(0,n.D$)(((...e)=>r.registerWithEmail&&r.registerWithEmail(...e)),["prevent"])),class:"register-form"},[(0,s.Lk)("div",S,[t[6]||(t[6]=(0,s.Lk)("label",{for:"email"},"Email:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>i.email=e),id:"email",required:"",class:"custom-input"},null,512),[[n.Jo,i.email]])]),(0,s.Lk)("div",w,[t[7]||(t[7]=(0,s.Lk)("label",{for:"password"},"Passwort:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>i.password=e),id:"password",required:"",class:"custom-input"},null,512),[[n.Jo,i.password]])]),(0,s.Lk)("div",L,[t[8]||(t[8]=(0,s.Lk)("label",{for:"confirmPassword"},"Passwort bestätigen:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"password","onUpdate:modelValue":t[2]||(t[2]=e=>i.confirmPassword=e),id:"confirmPassword",required:"",class:"custom-input"},null,512),[[n.Jo,i.confirmPassword]])]),t[9]||(t[9]=(0,s.Lk)("button",{type:"submit",class:"custom-button"},"Registrieren",-1))],32),(0,s.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>r.registerWithGoogle&&r.registerWithGoogle(...e)),class:"custom-button google-button"}," Registrieren mit Google "),(0,s.Lk)("p",null,[t[10]||(t[10]=(0,s.eW)(" Bereits ein Konto? ")),(0,s.Lk)("button",{onClick:t[5]||(t[5]=t=>e.$emit("switch-to-login")),class:"link-button"}," Hier einloggen ")])])}var I={name:"RegisterComponent",data(){return{email:"",password:"",confirmPassword:""}},methods:{async registerWithEmail(){if(this.password===this.confirmPassword)try{const e=await(0,l.eJ)(h,this.email,this.password),t=e.user;this.$emit("onAuthenticated",t),console.log("Erfolgreich registriert:",t)}catch(e){console.error("Fehler bei der Registrierung mit E-Mail:",e.message)}else console.error("Passwörter stimmen nicht überein.")},async registerWithGoogle(){try{const e=new l.HF,t=await(0,l.df)(h,e),o=t.user;this.$emit("onAuthenticated",o),console.log("Erfolgreich registriert mit Google:",o)}catch(e){console.error("Fehler bei der Registrierung mit Google:",e.message)}}}};const P=(0,b.A)(I,[["render",E]]);var O=P,G=o(4232);const W={class:"menu"},A={class:"game-id"},M=["value"];function D(e,t,o,a,i,r){return(0,s.uX)(),(0,s.CE)("div",W,[(0,s.Lk)("a",{href:"#",class:(0,G.C4)(["undo",{disabled:!o.canUndo}]),onClick:t[0]||(t[0]=(0,n.D$)((e=>r.triggerAction("undo")),["prevent"]))},"UNDO",2),(0,s.Lk)("a",{href:"#",class:(0,G.C4)(["redo",{disabled:!o.canRedo}]),onClick:t[1]||(t[1]=(0,n.D$)((e=>r.triggerAction("redo")),["prevent"]))},"REDO",2),o.gameState?((0,s.uX)(),(0,s.CE)("a",{key:0,href:"#",class:"add-cards",onClick:t[2]||(t[2]=(0,n.D$)((e=>r.triggerAction("addColumn")),["prevent"]))},"ADD CARDS")):(0,s.Q3)("",!0),o.gameState?((0,s.uX)(),(0,s.CE)("a",{key:1,href:"#",class:"exit",onClick:t[3]||(t[3]=(0,n.D$)((e=>r.triggerAction("exit")),["prevent"]))},"EXIT")):(0,s.Q3)("",!0),(0,s.Lk)("div",A,[t[5]||(t[5]=(0,s.Lk)("label",{for:"gameIdInput"},"Game ID:",-1)),(0,s.Lk)("input",{id:"gameIdInput",type:"text",value:o.gameId,readonly:"",onClick:t[4]||(t[4]=(...e)=>r.copyGameId&&r.copyGameId(...e)),title:"Klicken, um die Game-ID zu kopieren"},null,8,M)])])}let T=null;function $(e){return T||(T=new WebSocket(e),T.onopen=()=>{console.log("WebSocket connected"),T.send(JSON.stringify({action:"getSettings"}))},T.onerror=e=>console.error("WebSocket error:",e)),T}function N(){if(!T)throw new Error("WebSocket is not initialized. Call initializeWebSocket first.");return T}var R={name:"menu-component",props:{canUndo:Boolean,canRedo:Boolean,gameState:Boolean,gameId:String},methods:{triggerAction(e){const t=N();t.send(JSON.stringify({action:e}))},copyGameId(){navigator.clipboard.writeText(this.gameId).then((()=>{})).catch((e=>{console.error("Fehler beim Kopieren der Game-ID:",e)}))}}};const U=(0,b.A)(R,[["render",D]]);var X=U;const J={class:"settings"},x={class:"row"},j={class:"value"},Q={class:"row"},B={class:"value"},F={class:"start"};function _(e,t,o,a,i,r){return(0,s.uX)(),(0,s.CE)("div",J,[(0,s.Lk)("div",x,[t[4]||(t[4]=(0,s.Lk)("div",{class:"label"},"PLAYERS",-1)),(0,s.Lk)("div",j,[(0,s.Lk)("a",{href:"#",class:(0,G.C4)(["button-left",{disabled:o.playerCount<=1}]),onClick:t[0]||(t[0]=(0,n.D$)(((...e)=>r.removePlayer&&r.removePlayer(...e)),["prevent"]))},"<",2),(0,s.eW)(" "+(0,G.v_)(o.playerCount)+" ",1),(0,s.Lk)("a",{href:"#",class:(0,G.C4)(["button-right",{disabled:o.playerCount>=10}]),onClick:t[1]||(t[1]=(0,n.D$)(((...e)=>r.addPlayer&&r.addPlayer(...e)),["prevent"]))},">",2)])]),(0,s.Lk)("div",Q,[t[5]||(t[5]=(0,s.Lk)("div",{class:"label"},"EASY MODE",-1)),(0,s.Lk)("div",B,[(0,s.Lk)("a",{href:"#",class:"highlight",onClick:t[2]||(t[2]=(0,n.D$)(((...e)=>r.toggleEasyMode&&r.toggleEasyMode(...e)),["prevent"]))},(0,G.v_)(o.easyMode?"ON":"OFF"),1)])]),(0,s.Lk)("div",F,[(0,s.Lk)("a",{href:"#",class:"start-button",onClick:t[3]||(t[3]=(0,n.D$)((e=>r.startGame()),["prevent"]))},"START GAME")])])}var q={name:"settings-component",props:{playerCount:Number,easyMode:Boolean,offlineMode:Boolean},methods:{addPlayer(){const e=N();e.readyState===WebSocket.OPEN?e.send(JSON.stringify({action:"addPlayer"})):console.warn("WebSocket offline: Spieleranzahl wird nur lokal aktualisiert.")},removePlayer(){const e=N();e.readyState===WebSocket.OPEN?e.send(JSON.stringify({action:"removePlayer"})):console.warn("WebSocket offline: Spieleranzahl wird nur lokal aktualisiert.")},toggleEasyMode(){const e=N();e.readyState===WebSocket.OPEN?e.send(JSON.stringify({action:"switchEasy"})):console.warn("WebSocket offline: Easy Mode kann nicht geändert werden.")},startGame(){const e=N();e.readyState===WebSocket.OPEN?e.send(JSON.stringify({action:"startGame"})):console.error("WebSocket offline: Das Spiel kann nicht gestartet werden.")}}};const z=(0,b.A)(q,[["render",_],["__scopeId","data-v-d808e9be"]]);var V=z;const H={class:"cards"},K=["id","checked","disabled","onChange"];function Y(e,t,o,n,a,i){return(0,s.uX)(),(0,s.CE)("div",H,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.localCards,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"card-container"},[(0,s.Lk)("canvas",{class:(0,G.C4)({card:!0,selected:e.selected??!1}),ref_for:!0,ref:"cardCanvas-"+t},null,2),(0,s.Lk)("input",{type:"checkbox",id:"card-"+t,class:"card-checkbox",checked:e.selected,disabled:!i.isPlayerSelected,onChange:e=>i.handleCheckboxChange(t)},null,40,K)])))),128))])}o(4114),o(3949);function Z(e,t){const o=document.createElement("canvas"),n=o.getContext("2d");o.width=2*t,o.height=2*t,n.fillStyle=e,n.fillRect(0,0,o.width,t);const s=document.createElement("canvas"),a=s.getContext("2d");return a.createPattern(o,"repeat")}var ee={name:"cards-component",props:{cards:{type:Array,default:()=>[]},selectedIndices:{type:Array,default:()=>[]},selectedPlayer:{type:Object,default:()=>null}},data(){return{localCards:[...this.cards],sessionSelectedIndices:[...this.selectedIndices]}},methods:{renderCard(e){const t=this.$refs[`cardCanvas-${e}`];if(Array.isArray(t)&&"CANVAS"===t[0]?.tagName){const o=t[0],n=this.localCards[e];console.log(n,e);const s=o.getContext("2d");if(s){let e;"RED"===n.color?e="#da0100":"GREEN"===n.color?e="#ffa800":"BLUE"===n.color&&(e="#060488"),s.strokeStyle=e,s.lineWidth=5,"SOLID"===n.shading?s.fillStyle=e:"STRIPED"===n.shading?s.fillStyle=Z(e,5):"OUTLINED"===n.shading?s.fillStyle="white":s.fillStyle=e;const t=10,a=o.width-2*t,i=o.height-2*t,r=a/5,l=i/2;let c;if(1===n.number)c=[a/2+t];else if(2===n.number){const e="SQUIGGLE"!==n.symbol?a/4:a/3,o=(e-r)/2-("SQUIGGLE"!==n.symbol?0:45);c=[e+r/2+t+o,2*e+r/2+t+o]}else if(3===n.number){const e="SQUIGGLE"!==n.symbol?a/4:a/3,o="SQUIGGLE"!==n.symbol?0:-45;c=[e+t+o,2*e+t+o,3*e+t+o]}if("OVAL"===n.symbol)for(let o=0;o<c.length;o++)s.roundRect(c[o]-r/2,i/2+t-l/2,r,l,r/2),s.fill(),s.stroke();else if("DIAMOND"===n.symbol)for(let o=0;o<c.length;o++){const e=c[o],n=i/2+t-l/2;s.beginPath(),s.moveTo(e,n),s.lineTo(e-r/2,n+l/2),s.lineTo(e,n+l),s.lineTo(e+r/2,n+l/2),s.closePath(),s.fill(),s.stroke()}else if("SQUIGGLE"===n.symbol)for(let o=0;o<c.length;o++){const e=c[o],n=i/2+t-l/2;s.save();const a=.65;s.scale(a,a),s.translate(e+100,n+120),s.rotate(Math.PI/2),s.beginPath(),s.moveTo(0,0),s.bezierCurveTo(8.4,21.9,-14.3,45.8,-41,39),s.bezierCurveTo(-51.7,36.3,-61.8,27,-77,38),s.bezierCurveTo(-94.4,50.6,-98.6,43.3,-99,25),s.bezierCurveTo(-99.4,7,-84.9,-5.3,-68,-3),s.bezierCurveTo(-44.8,-.8,-42.1,16.5,-15,-1),s.bezierCurveTo(-8.7,-5,-3.1,-8.1,0,0),s.closePath(),s.restore(),s.fill(),s.stroke()}}else console.warn(`Canvas context for ID ${e} could not be retrieved.`)}else console.warn(`Canvas with ID ${e} is not valid or not found.`)},handleCheckboxChange(e){if(!this.selectedPlayer)return;const t=this.sessionSelectedIndices.indexOf(e);t>-1?this.sessionSelectedIndices.splice(t,1):this.sessionSelectedIndices.push(e),this.localCards[e].selected=!this.localCards[e].selected,3===this.sessionSelectedIndices.length&&(this.selectCards(this.sessionSelectedIndices),this.resetSelection())},selectCards(e){const t=N(),o=e.map((e=>{const t=String.fromCharCode(97+Math.floor(e/3)),o=e%3+1;return`${t}${o}`}));t.send(JSON.stringify({action:"selectCards",coordinates:o.join("-")})),console.log("Selected card coordinates:",o)},resetSelection(){this.sessionSelectedIndices=[],this.localCards.forEach((e=>e.selected=!1))}},computed:{isPlayerSelected(){return null!==this.selectedPlayer}},watch:{cards:{immediate:!0,handler(e){this.localCards=[...e],this.$nextTick((()=>{this.localCards.forEach(((e,t)=>{this.renderCard(t)}))}))}}}};const te=(0,b.A)(ee,[["render",Y],["__scopeId","data-v-e347e62c"]]);var oe=te;const ne={class:"bottom"},se={key:0,class:"rules"},ae={key:1,class:"end-session"},ie={key:2,class:"player-selection"},re=["onClick"],le={key:3,class:"message"};function ce(e,t,o,a,i,r){return(0,s.uX)(),(0,s.CE)("div",ne,[o.home?((0,s.uX)(),(0,s.CE)("div",se,t[1]||(t[1]=[(0,s.Lk)("a",{href:"/rules"},"GAME RULES",-1)]))):(0,s.Q3)("",!0),o.gameState||o.home?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",ae,[(0,s.Lk)("a",{href:"#",onClick:t[0]||(t[0]=(0,n.D$)((e=>r.endSession()),["prevent"]))},"END SESSION")])),o.gameState?((0,s.uX)(),(0,s.CE)("div",ie,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.players,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.number},[(0,s.Lk)("a",{href:"#",class:(0,G.C4)({selected:o.selectedPlayer&&o.selectedPlayer.number===e.number}),onClick:(0,n.D$)((t=>r.selectPlayer(e)),["prevent"])}," PLAYER "+(0,G.v_)(e.number)+": "+(0,G.v_)(e.sets.length),11,re)])))),128))])):(0,s.Q3)("",!0),o.gameState?((0,s.uX)(),(0,s.CE)("div",le,(0,G.v_)(o.message),1)):(0,s.Q3)("",!0)])}var de={name:"bottom-component",props:{gameState:{type:Boolean,required:!0},playerCount:{type:Number,required:!0},selectedPlayer:{type:Object,default:()=>null},players:{type:Array,required:!0},message:{type:String,required:!0},home:{type:Boolean,required:!0}},methods:{selectPlayer(e){this.$emit("select-player",e)},endSession(){this.$emit("end-session")}}};const ue=(0,b.A)(de,[["render",ce],["__scopeId","data-v-3f756ba4"]]);var he=ue;const me={class:"offline-container"};function ge(e,t,o,n,a,i){return(0,s.uX)(),(0,s.CE)("div",me,[t[1]||(t[1]=(0,s.Lk)("div",{class:"offline-message"},[(0,s.Lk)("p",null,"Du bist offline! Versuche, die Verbindung wiederherzustellen.")],-1)),t[2]||(t[2]=(0,s.Lk)("div",{class:"offline-animation"},null,-1)),(0,s.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.goBackToHome&&i.goBackToHome(...e)),class:"back-to-home-btn"},"Zurück zum Home")])}var pe={props:{disableOfflineMode:Function},data(){return{isOnline:navigator.onLine}},created(){},unmounted(){},methods:{handleOnline(){this.isOnline=!0},handleOffline(){this.isOnline=!1},goBackToHome(){this.disableOfflineMode()}}};const fe=(0,b.A)(pe,[["render",ge],["__scopeId","data-v-0c6f51a4"]]);var ke=fe;const be={class:"game-options"},ye={class:"row"},ve={class:"join-game-wrapper"};function Ce(e,t,o,a,i,r){return(0,s.uX)(),(0,s.CE)("div",be,[(0,s.Lk)("div",ye,[(0,s.Lk)("a",{href:"#",class:"button create-game",onClick:t[0]||(t[0]=(0,n.D$)(((...e)=>r.createGame&&r.createGame(...e)),["prevent"]))},"CREATE GAME"),(0,s.Lk)("div",ve,[(0,s.bo)((0,s.Lk)("input",{type:"text",class:"game-id-input","onUpdate:modelValue":t[1]||(t[1]=e=>i.gameId=e),placeholder:"Enter Game ID"},null,512),[[n.Jo,i.gameId]]),(0,s.Lk)("a",{href:"#",class:"button join-game",onClick:t[2]||(t[2]=(0,n.D$)(((...e)=>r.joinGame&&r.joinGame(...e)),["prevent"]))},"JOIN GAME")])])])}var Se={name:"home-component",props:{offlineMode:Boolean},data(){return{gameId:""}},methods:{createGame(){const e=this.generateUniqueId();this.$emit("localCreateGame",e)},joinGame(){this.gameId?this.$emit("localJoinGame",this.gameId):console.warn("Game ID is required to join a game.")},generateUniqueId(){return Math.random().toString(36).substr(2,9)}}};const we=(0,b.A)(Se,[["render",Ce]]);var Le=we;class Ee{constructor(e,t,o,n,s,a){this.number=e,this.color=t,this.shading=o,this.symbol=n,this.selected=s,this.name=a}}var Ie={name:"MainComponent",components:{LoginComponent:v,RegisterComponent:O,MenuComponent:X,HomeComponent:Le,SettingsComponent:V,CardsComponent:oe,BottomComponent:he,OfflineComponent:ke},data(){return{user:null,showLogin:!0,websocket:null,canUndo:!1,canRedo:!1,gameState:!1,playerCount:1,easyMode:!1,cards:[],selectedCardIndices:[],selectedPlayer:null,players:[],message:"",isOnline:navigator.onLine,home:!0,websocketTimeout:null,loading:!1,gameId:""}},methods:{handleAuthenticated(e){this.user=e},showRegisterComponent(){this.showLogin=!1},showLoginComponent(){this.showLogin=!0},setWebSocket(e){this.loading=!0,this.isOnline=!0,null!=this.websocket&&this.websocket.open&&this.websocket.close(),this.websocket=$(`ws://localhost:9000/socket/${e}`),this.gameId=e,console.log("WebSocket updated in MainComponent:",this.websocket),this.websocketTimeout=setTimeout((()=>{this.websocket&&this.websocket.readyState===WebSocket.OPEN||(this.isOnline=!1,console.log("WebSocket konnte nicht innerhalb von 5 Sekunden verbunden werden. Offline-Modus aktiviert."),this.loading=!1)}),100),this.setupWebSocketHandlers()},disableOfflineMode(){this.home=!0,this.isOnline=!0,location.reload()},setupWebSocketHandlers(){this.websocket&&(this.websocket.onopen=()=>{this.websocketTimeout&&(clearTimeout(this.websocketTimeout),this.websocketTimeout=null),this.isOnline=!0,this.websocket.send(JSON.stringify({action:"getState"})),this.loading=!1,console.log("WebSocket-Verbindung erfolgreich.")},this.websocket.onmessage=e=>{const t=JSON.parse(e.data);console.log("WebSocket message:",t),this.canUndo=t.canUndo??this.canUndo,this.canRedo=t.canRedo??this.canRedo,this.gameState=t.inGame??this.gameState,this.easyMode=t.easy??this.easyMode,this.playerCount=t.playercount??this.playerCount,this.selectedPlayer=null!==t.selectedPlayer?this.players.find((e=>e.number===t.selectedPlayer)):null,this.message=t.message??this.message,t.cards&&(this.cards=t.cards.map((e=>new Ee(e.number,e.color,e.shading,e.symbol,e.selected,e.name)))),t.players&&(this.players=t.players)},this.websocket.onclose=()=>{console.warn("WebSocket closed. Game may be disconnected."),this.websocket=null,this.isOnline=!0,this.loading=!1})},handleLocalCreateGame(e){console.log(`Local game created with ID: ${e}`),this.home=!1,this.setWebSocket(e)},handleLocalJoinGame(e){console.log("Joined game locally."),this.home=!1,this.setWebSocket(e)},handleEndSession(){this.websocket.close(),this.websocket=null,this.home=!0,location.reload()},handlePlayerSelection(e){this.websocket&&this.websocket.send(JSON.stringify({action:"selectPlayer",playerNumber:e.number})),this.selectedPlayer=e}},created(){(0,l.hg)(h,(e=>{this.user=e}))}};const Pe=(0,b.A)(Ie,[["render",r]]);var Oe=Pe,Ge=o(4458);(0,Ge.k)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}}),"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("/service-worker.js").then((e=>{console.log("Service Worker registered with scope:",e.scope)})).catch((e=>{console.log("Service Worker registration failed:",e)}))})),(0,n.Ef)(Oe).mount("#app")}},t={};function o(n){var s=t[n];if(void 0!==s)return s.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,o),a.exports}o.m=e,function(){var e=[];o.O=function(t,n,s,a){if(!n){var i=1/0;for(d=0;d<e.length;d++){n=e[d][0],s=e[d][1],a=e[d][2];for(var r=!0,l=0;l<n.length;l++)(!1&a||i>=a)&&Object.keys(o.O).every((function(e){return o.O[e](n[l])}))?n.splice(l--,1):(r=!1,a<i&&(i=a));if(r){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[n,s,a]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var s,a,i=n[0],r=n[1],l=n[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(s in r)o.o(r,s)&&(o.m[s]=r[s]);if(l)var d=l(o)}for(t&&t(n);c<i.length;c++)a=i[c],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(d)},n=self["webpackChunksetapp"]=self["webpackChunksetapp"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[504],(function(){return o(6053)}));n=o.O(n)})();
//# sourceMappingURL=app.5fd4eec6.js.map